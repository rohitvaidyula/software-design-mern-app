function cov_1yorsvtocm(){var path="C:\\Users\\vaidy\\software-design-mern-app\\backend\\routes\\UserRoutes.js";var hash="c040dae4015c9128d58f6cfa73a5e9e6ff251dcd";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\vaidy\\software-design-mern-app\\backend\\routes\\UserRoutes.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:11},end:{line:3,column:50}},"3":{start:{line:4,column:13},end:{line:4,column:30}},"4":{start:{line:6,column:0},end:{line:57,column:3}},"5":{start:{line:7,column:2},end:{line:56,column:3}},"6":{start:{line:8,column:17},end:{line:8,column:34}},"7":{start:{line:9,column:17},end:{line:9,column:34}},"8":{start:{line:10,column:22},end:{line:10,column:44}},"9":{start:{line:12,column:4},end:{line:16,column:5}},"10":{start:{line:13,column:6},end:{line:15,column:9}},"11":{start:{line:18,column:4},end:{line:22,column:5}},"12":{start:{line:19,column:6},end:{line:21,column:9}},"13":{start:{line:24,column:4},end:{line:28,column:5}},"14":{start:{line:25,column:6},end:{line:27,column:9}},"15":{start:{line:30,column:4},end:{line:34,column:5}},"16":{start:{line:31,column:6},end:{line:33,column:9}},"17":{start:{line:36,column:25},end:{line:36,column:63}},"18":{start:{line:37,column:4},end:{line:41,column:5}},"19":{start:{line:38,column:6},end:{line:40,column:9}},"20":{start:{line:43,column:17},end:{line:43,column:39}},"21":{start:{line:44,column:27},end:{line:44,column:56}},"22":{start:{line:46,column:20},end:{line:49,column:6}},"23":{start:{line:50,column:22},end:{line:50,column:42}},"24":{start:{line:51,column:4},end:{line:51,column:31}},"25":{start:{line:53,column:4},end:{line:55,column:7}},"26":{start:{line:59,column:0},end:{line:88,column:3}},"27":{start:{line:60,column:2},end:{line:87,column:3}},"28":{start:{line:61,column:17},end:{line:61,column:34}},"29":{start:{line:62,column:17},end:{line:62,column:34}},"30":{start:{line:64,column:17},end:{line:64,column:55}},"31":{start:{line:66,column:4},end:{line:70,column:5}},"32":{start:{line:67,column:6},end:{line:69,column:9}},"33":{start:{line:72,column:20},end:{line:72,column:61}},"34":{start:{line:74,column:4},end:{line:78,column:5}},"35":{start:{line:75,column:6},end:{line:77,column:9}},"36":{start:{line:80,column:4},end:{line:82,column:7}},"37":{start:{line:84,column:4},end:{line:86,column:7}},"38":{start:{line:90,column:0},end:{line:90,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:25},end:{line:6,column:26}},loc:{start:{line:6,column:45},end:{line:57,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:59,column:22},end:{line:59,column:23}},loc:{start:{line:59,column:42},end:{line:88,column:1}},line:59}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:16,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:16,column:5}},{start:{line:12,column:4},end:{line:16,column:5}}],line:12},"1":{loc:{start:{line:12,column:8},end:{line:12,column:36}},type:"binary-expr",locations:[{start:{line:12,column:8},end:{line:12,column:13}},{start:{line:12,column:17},end:{line:12,column:22}},{start:{line:12,column:26},end:{line:12,column:36}}],line:12},"2":{loc:{start:{line:18,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:22,column:5}},{start:{line:18,column:4},end:{line:22,column:5}}],line:18},"3":{loc:{start:{line:24,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:28,column:5}},{start:{line:24,column:4},end:{line:28,column:5}}],line:24},"4":{loc:{start:{line:30,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:30,column:4},end:{line:34,column:5}},{start:{line:30,column:4},end:{line:34,column:5}}],line:30},"5":{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:37,column:4},end:{line:41,column:5}}],line:37},"6":{loc:{start:{line:66,column:4},end:{line:70,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:70,column:5}},{start:{line:66,column:4},end:{line:70,column:5}}],line:66},"7":{loc:{start:{line:74,column:4},end:{line:78,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:78,column:5}},{start:{line:74,column:4},end:{line:78,column:5}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c040dae4015c9128d58f6cfa73a5e9e6ff251dcd"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1yorsvtocm=function(){return actualCoverage;};}return actualCoverage;}cov_1yorsvtocm();var express=(cov_1yorsvtocm().s[0]++,require("express"));var router=(cov_1yorsvtocm().s[1]++,express.Router());var user=(cov_1yorsvtocm().s[2]++,require("../models/UserCredController"));var bcrypt=(cov_1yorsvtocm().s[3]++,require("bcrypt"));cov_1yorsvtocm().s[4]++;router.post("/register",async(req,res)=>{cov_1yorsvtocm().f[0]++;cov_1yorsvtocm().s[5]++;try{const name=(cov_1yorsvtocm().s[6]++,req.body.username);const pass=(cov_1yorsvtocm().s[7]++,req.body.password);const passCheck=(cov_1yorsvtocm().s[8]++,req.body.passwordCheck);cov_1yorsvtocm().s[9]++;if((cov_1yorsvtocm().b[1][0]++,!name)||(cov_1yorsvtocm().b[1][1]++,!pass)||(cov_1yorsvtocm().b[1][2]++,!passCheck)){cov_1yorsvtocm().b[0][0]++;cov_1yorsvtocm().s[10]++;return res.status(400).json({message:"All fileds must be entered!"});}else{cov_1yorsvtocm().b[0][1]++;}cov_1yorsvtocm().s[11]++;if(name.length<5){cov_1yorsvtocm().b[2][0]++;cov_1yorsvtocm().s[12]++;return res.status(400).json({message:"Username must be at least 5 characters"});}else{cov_1yorsvtocm().b[2][1]++;}cov_1yorsvtocm().s[13]++;if(pass.length<8){cov_1yorsvtocm().b[3][0]++;cov_1yorsvtocm().s[14]++;return res.status(400).json({message:"Password must be at least 8 characters"});}else{cov_1yorsvtocm().b[3][1]++;}cov_1yorsvtocm().s[15]++;if(pass!==passCheck){cov_1yorsvtocm().b[4][0]++;cov_1yorsvtocm().s[16]++;return res.status(400).json({message:"Passwords do not match!"});}else{cov_1yorsvtocm().b[4][1]++;}const existingUser=(cov_1yorsvtocm().s[17]++,await user.findOne({userName:name}));cov_1yorsvtocm().s[18]++;if(existingUser){cov_1yorsvtocm().b[5][0]++;cov_1yorsvtocm().s[19]++;return res.status(400).json({message:"An account with this user already exists!"});}else{cov_1yorsvtocm().b[5][1]++;}const salt=(cov_1yorsvtocm().s[20]++,await bcrypt.genSalt());const hashedPassword=(cov_1yorsvtocm().s[21]++,await bcrypt.hash(pass,salt));const newUser=(cov_1yorsvtocm().s[22]++,new user({userName:name,passWord:hashedPassword}));const savedUser=(cov_1yorsvtocm().s[23]++,await newUser.save());cov_1yorsvtocm().s[24]++;return res.json(savedUser);}catch(err){cov_1yorsvtocm().s[25]++;res.status(500).json({error:err.message});}});cov_1yorsvtocm().s[26]++;router.post("/login",async(req,res)=>{cov_1yorsvtocm().f[1]++;cov_1yorsvtocm().s[27]++;try{const name=(cov_1yorsvtocm().s[28]++,req.body.username);const pass=(cov_1yorsvtocm().s[29]++,req.body.password);const User=(cov_1yorsvtocm().s[30]++,await user.findOne({userName:name}));cov_1yorsvtocm().s[31]++;if(!User){cov_1yorsvtocm().b[6][0]++;cov_1yorsvtocm().s[32]++;return res.status(400).json({message:"No account with this user exists"});}else{cov_1yorsvtocm().b[6][1]++;}const isMatch=(cov_1yorsvtocm().s[33]++,await bcrypt.compare(pass,User.passWord));cov_1yorsvtocm().s[34]++;if(!isMatch){cov_1yorsvtocm().b[7][0]++;cov_1yorsvtocm().s[35]++;return res.status(400).json({message:"Invalid Credentials"});}else{cov_1yorsvtocm().b[7][1]++;}cov_1yorsvtocm().s[36]++;return res.json({message:"I guess it worked?"});}catch(err){cov_1yorsvtocm().s[37]++;return res.status(400).json({error:err.message});}});cov_1yorsvtocm().s[38]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVzZXJSb3V0ZXMuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ1c2VyIiwiYmNyeXB0IiwicG9zdCIsInJlcSIsInJlcyIsIm5hbWUiLCJib2R5IiwidXNlcm5hbWUiLCJwYXNzIiwicGFzc3dvcmQiLCJwYXNzQ2hlY2siLCJwYXNzd29yZENoZWNrIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJsZW5ndGgiLCJleGlzdGluZ1VzZXIiLCJmaW5kT25lIiwidXNlck5hbWUiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaCIsIm5ld1VzZXIiLCJwYXNzV29yZCIsInNhdmVkVXNlciIsInNhdmUiLCJlcnIiLCJlcnJvciIsIlVzZXIiLCJpc01hdGNoIiwiY29tcGFyZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJnNkpBZVk7MkZBZlosR0FBSUEsQ0FBQUEsT0FBTywwQkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFYLENBQ0EsR0FBSUMsQ0FBQUEsTUFBTSwwQkFBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQUgsQ0FBVixDQUNBLEdBQUlDLENBQUFBLElBQUksMEJBQUdILE9BQU8sQ0FBQyw4QkFBRCxDQUFWLENBQVIsQ0FDQSxHQUFJSSxDQUFBQSxNQUFNLDBCQUFHSixPQUFPLENBQUMsUUFBRCxDQUFWLENBQVYsQyx3QkFFQUMsTUFBTSxDQUFDSSxJQUFQLENBQVksV0FBWixDQUF5QixNQUFPQyxHQUFQLENBQVlDLEdBQVosR0FBb0IsaURBQzNDLEdBQUksQ0FDRixLQUFNQyxDQUFBQSxJQUFJLDBCQUFHRixHQUFHLENBQUNHLElBQUosQ0FBU0MsUUFBWixDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsSUFBSSwwQkFBR0wsR0FBRyxDQUFDRyxJQUFKLENBQVNHLFFBQVosQ0FBVixDQUNBLEtBQU1DLENBQUFBLFNBQVMsMEJBQUdQLEdBQUcsQ0FBQ0csSUFBSixDQUFTSyxh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QUFHLENBQUNRLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUMxQkMsT0FBTyxDQUFFLGtDQURpQixDQUFyQixDQUFQLENBR0QsQ0FKRCxpQ0FNQSxLQUFNZ0IsQ0FBQUEsT0FBTywyQkFBRyxLQUFNN0IsQ0FBQUEsTUFBTSxDQUFDOEIsT0FBUCxDQUFldkIsSUFBZixDQUFxQnFCLElBQUksQ0FBQ0wsUUFBMUIsQ0FBVCxDQUFiLENBWkUseUJBY0YsR0FBSSxDQUFDTSxPQUFMLENBQWMscURBQ1osTUFBTzFCLENBQUFBLEdBQUcsQ0FBQ1EsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQzFCQyxPQUFPLENBQUUscUJBRGlCLENBQXJCLENBQVAsQ0FHRCxDQUpELGlDQWRFLHlCQW9CRixNQUFPVixDQUFBQSxHQUFHLENBQUNTLElBQUosQ0FBUyxDQUNkQyxPQUFPLENBQUUsb0JBREssQ0FBVCxDQUFQLENBR0QsQ0FBQyxNQUFPYSxHQUFQLENBQVksMEJBQ1osTUFBT3ZCLENBQUFBLEdBQUcsQ0FBQ1EsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQzFCZSxLQUFLLENBQUVELEdBQUcsQ0FBQ2IsT0FEZSxDQUFyQixDQUFQLENBR0QsQ0FDRixDQTdCRCxFLHlCQStCQWtCLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQm5DLE1BQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcclxudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcbnZhciB1c2VyID0gcmVxdWlyZShcIi4uL21vZGVscy9Vc2VyQ3JlZENvbnRyb2xsZXJcIik7XHJcbnZhciBiY3J5cHQgPSByZXF1aXJlKFwiYmNyeXB0XCIpO1xyXG5cclxucm91dGVyLnBvc3QoXCIvcmVnaXN0ZXJcIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5hbWUgPSByZXEuYm9keS51c2VybmFtZTtcclxuICAgIGNvbnN0IHBhc3MgPSByZXEuYm9keS5wYXNzd29yZDtcclxuICAgIGNvbnN0IHBhc3NDaGVjayA9IHJlcS5ib2R5LnBhc3N3b3JkQ2hlY2s7XHJcblxyXG4gICAgaWYgKCFuYW1lIHx8ICFwYXNzIHx8ICFwYXNzQ2hlY2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIkFsbCBmaWxlZHMgbXVzdCBiZSBlbnRlcmVkIVwiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobmFtZS5sZW5ndGggPCA1KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJVc2VybmFtZSBtdXN0IGJlIGF0IGxlYXN0IDUgY2hhcmFjdGVyc1wiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGFzcy5sZW5ndGggPCA4KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGFzcyAhPT0gcGFzc0NoZWNrKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJQYXNzd29yZHMgZG8gbm90IG1hdGNoIVwiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCB1c2VyLmZpbmRPbmUoeyB1c2VyTmFtZTogbmFtZSB9KTtcclxuICAgIGlmIChleGlzdGluZ1VzZXIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiBcIkFuIGFjY291bnQgd2l0aCB0aGlzIHVzZXIgYWxyZWFkeSBleGlzdHMhXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgpO1xyXG4gICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzLCBzYWx0KTtcclxuXHJcbiAgICBjb25zdCBuZXdVc2VyID0gbmV3IHVzZXIoe1xyXG4gICAgICB1c2VyTmFtZTogbmFtZSxcclxuICAgICAgcGFzc1dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBzYXZlZFVzZXIgPSBhd2FpdCBuZXdVc2VyLnNhdmUoKTtcclxuICAgIHJldHVybiByZXMuanNvbihzYXZlZFVzZXIpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICBlcnJvcjogZXJyLm1lc3NhZ2UsXHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5hbWUgPSByZXEuYm9keS51c2VybmFtZTtcclxuICAgIGNvbnN0IHBhc3MgPSByZXEuYm9keS5wYXNzd29yZDtcclxuXHJcbiAgICBjb25zdCBVc2VyID0gYXdhaXQgdXNlci5maW5kT25lKHsgdXNlck5hbWU6IG5hbWUgfSk7XHJcblxyXG4gICAgaWYgKCFVc2VyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJObyBhY2NvdW50IHdpdGggdGhpcyB1c2VyIGV4aXN0c1wiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzcywgVXNlci5wYXNzV29yZCk7XHJcblxyXG4gICAgaWYgKCFpc01hdGNoKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIENyZWRlbnRpYWxzXCIsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IFwiSSBndWVzcyBpdCB3b3JrZWQ/XCIsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiBlcnIubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcclxuIl19